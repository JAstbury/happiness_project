#welcome-text
  %h1 BLOOM
  %h2 Skill tracking for budding web developers

.fullscreen-bg
  %video.fullscreen-bg__video{:autoplay => "", :loop => "", :muted => "", :poster => "../Let-It-Grow/Let-It-Grow.jpg"}
    %source{:src => "../Let-It-Grow/Let-It-Grow.webm", :type => "video/webm"}
    %source{:src => "../Let-It-Grow/Let-It-Grow.mp4", :type => "video/mp4"}

  %p Bloom provides skill metrics and handpicked resources to help you blossom as a junior web developer

- if current_user
  = link_to 'Set confidence', new_skill_path, {:id => "button"}
  - if @skills.any?
    %table{:border => 1}
      %tbody
        %tr
          %td Skills:
          - sum = 1
          - @skills[0].confidences.length.times do
            %td= "Day-#{sum}:"
            - sum += 1
          - @skills.each do |skill|
            %tr
              %td
                = link_to "#{skill.name}", skill_path(skill)
              - skill.confidences.each do |confidence|
                %td=  confidence.rating

  - else
    %h1 No skills yet!
    %br
    %br


<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; max-width: 600px; height: 400px; margin: 0 auto"></div>
:JavaScript
  $(function () {

      $('#container').highcharts({

          chart: {
              polar: true,
              type: 'line',
              backgroundColor: 'transparent'
          },

          title: {
              text: 'Track your progress',
              x: -80
          },

          pane: {
              size: '80%'
          },

          xAxis: {
              categories: #{@skillsarray},
              tickmarkPlacement: 'on',
              lineWidth: 0
          },

          yAxis: {
              gridLineInterpolation: 'polygon',
              lineWidth: 0,
              min: 0
          },

          tooltip: {
              shared: true,
              pointFormat: '<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/>'
          },

          legend: {
              align: 'right',
              verticalAlign: 'top',
              y: 70,
              layout: 'vertical'
          },

          series: [{
              name: 'Current ratings',
              data: #{@con_array},
              pointPlacement: 'on'
          },{
             name: 'Original ratings',
             data: #{@first_array},
             pointPlacement: 'on',
             color: '#FF00FF '
         }]
      });
  });
